<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ex6</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
        integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">
</head>

<body>
    <div class="container">
        <div class="row">
            <form action="">
                <div class="form-row">

                    <div class="form-group">
                        <!-- 傳到後端的資料，"key" 是 name, "value" 是 option 的 value。 -->
                        <select name="city" id="city" class="form-control">
                            <option value="0">基隆</option>
                            <option value="1">台北</option>
                            <option value="2">新北</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <select name="district" id="district" class="form-control">
                            <option value="0">七堵區</option>
                            <option value="1">中正區</option>
                            <option value="2">暖暖區</option>
                        </select>
                    </div>
                </div>
            </form>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.6.0.js"
        integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk=" crossorigin="anonymous"></script>

    <script>

        let districtArray = [
            ['七堵', '中正', '暖暖'], //0
            ['中正', '大安', '信義'], //1
            ['蘆洲', '三重', '新店'], //2
        ];

        //1.監聽 #city 的 change 事件
        //2.$(this).val() 是什麼？幫我 console.log 印出來
        $('#city').change(function () {
            // 這裡觸發呼叫 function 的人是 #city, 所以 $(this) 是 #city
            console.log($(this).val());
            const nowCity = $(this).val();
            const districtValue = districtArray[nowCity];
            console.log('districtValue', districtValue);

            // $('#district option').eq(0).text(districtValue[0]);
            // $('#district option').eq(1).text(districtValue[1]);
            // $('#district option').eq(2).text(districtValue[2]);

            // 原生 JS for 迴圈
            // for (let i = 0; i < districtValue.length; i++) {
            //     $('#district option').eq(i).text(districtValue[i]);
            // }

            // JS Array Methods
            // forEach, map, ...

            // jQuery 的迴圈，有三個 option 就跑三次，每次都拿其中一個 Option 當做 $(this)
            $('#district option').each(function () {
                // 這裡觸發 function 的人是 #district option, $(this)只是代名詞,誰呼叫就是代表誰
                $(this).text(districtValue[$(this).val()]);
            });

        });

    </script>
</body>

</html>